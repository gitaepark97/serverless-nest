Project serverless_nest {
  database_type: 'MariaDB'
  Note: '''
    # Serverless Nest Database
  '''
}

Enum "users_gender_enum" {
  "M"
  "W"
}

Table "users" {
  "user_id" int(11) [pk, not null, increment]
  "email" varchar(50) [not null]
  "hashed_password" varchar(255) [not null]
  "salt" varchar(255) [not null]
  "nickname" varchar(50) [not null]
  "gender" users_gender_enum [not null]
  "created_at" timestamp(6) [not null, default: `current_timestamp(6)`]
  "updated_at" timestamp(6) [not null, default: `current_timestamp(6)`]

Indexes {
  nickname [unique, name: "nickname"]
  email [unique, name: "email"]
}
}

Table "sessions" {
  "session_id" char(36) [pk, not null]
  "user_id" int(11) [not null]
  "refresh_token" varchar(255) [not null]
  "user_agent" varchar(255) [not null]
  "client_ip" varchar(255) [not null]
  "is_blocked" tinyint(1) [not null, default: 0]
  "created_at" timestamp(6) [not null, default: `current_timestamp(6)`]

Indexes {
  user_id [name: "user_id"]
}
}

Ref "fk_user_id":"users"."user_id" < "sessions"."user_id" [update: no action, delete: cascade]
